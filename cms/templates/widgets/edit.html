<%! from django.utils.translation import ugettext as _ %>
<%page args="tabName"/>
<div style="margin: -20px;">
  <textarea id="advanced-${html_id}" class="edit-box">${data | h}</textarea>
</div>

<script type='text/javascript'>
    $(document).ready(function(){
      (function(){
        var advanced_editor = CodeMirror.fromTextArea(
          $("#advanced-${html_id}").get(0),
          {
            mode: "text/html",
            lineNumbers: true,
            lineWrapping: true
          }
        );
        TabsEditorDescriptor.registerTabCallback('${html_id}', '${tabName}', function(){
          advanced_editor.refresh();
          advanced_editor.focus();
        })
      }());
    });
</script>